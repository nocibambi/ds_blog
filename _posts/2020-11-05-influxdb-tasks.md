---
keywords: fastai
title: InfluxDB tasks
nb_path: _notebooks/2020-11-05-influxdb-tasks.ipynb
layout: notebook
---

<!--
#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: _notebooks/2020-11-05-influxdb-tasks.ipynb
-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Tasks are scheduled Flux queries that allow you to process data with InfluxDB.</p>
<h3 id="Task-components">Task components<a class="anchor-link" href="#Task-components"> </a></h3><p>Tasks should have the following components:</p>
<ul>
<li>Options</li>
<li>Data source</li>
<li>Processing steps</li>
<li>Destination</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Task-Options">Task Options<a class="anchor-link" href="#Task-Options"> </a></h2><p>You can specify options that tasks will use. This makes it easier to reuse and modify your tasks.</p>

<pre><code>option task = {
    // Task name
    name: "monitor task",

    // Run interval
    every: 5m,

    // Cron job
    cron : "0 * * * * *"

    // Task start delay
    offset: 10m,

    // Maximum number of concurrent tasks
    concurrency: 2,

    // Number of tries before getting failed status
    retry: 5,
}</code></pre>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Task-data-source">Task data source<a class="anchor-link" href="#Task-data-source"> </a></h2><p>You can use the <code>from()</code> function to specify the data you try to get.</p>

<pre><code>data = from(bucket: "status info")
  // `-task.every` is a task option passed here
  |&gt; range(start: -task.every)
  |&gt; filter(fn: (r) =&gt;
    r._measurement == "temperature" and
    r.host == "dataSource"
  )</code></pre>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Data-processing-and-destination">Data processing and destination<a class="anchor-link" href="#Data-processing-and-destination"> </a></h2><p>You can use the <code>to()</code> function to store the results in another bucket.</p>

<pre><code>data
  // Process
  |&gt; aggregateWindow(
      every: 1h,
      fn: sum
  )

  // Store results
  |&gt; to(bucket: "status_log", org: "logger")</code></pre>
<p>You can learn more about data processing in the <a href="https://docs.influxdata.com/influxdb/v2.0/process-data/common-tasks/">documentation</a>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Create-a-task-in-the-UI">Create a task in the UI<a class="anchor-link" href="#Create-a-task-in-the-UI"> </a></h2><p>In the UI, you can create tasks by the following ways</p>
<ul>
<li>The <strong>Data Explorer</strong> screen</li>
<li>The <strong>Task</strong> screen</li>
<li>Import (in the <strong>Task</strong> screen)</li>
<li>Create from template (in the <strong>Settings</strong> screen)</li>
<li>Clone a taks (in the <strong>Task</strong> screen)</li>
</ul>
<h3 id="Data-Explorer">Data Explorer<a class="anchor-link" href="#Data-Explorer"> </a></h3><ol>
<li>Open the <strong>Data Explorer</strong></li>
<li>Select <strong>Task</strong></li>
<li>Define the task options.</li>
<li>Select a token.</li>
<li>Click <strong>Save as Task</strong></li>
</ol>
<h3 id="Task-UI">Task UI<a class="anchor-link" href="#Task-UI"> </a></h3><ol>
<li>Open the <strong>Task</strong> screen</li>
<li>Select <strong>Create Task</strong></li>
<li>Click <strong>New Task</strong></li>
<li>Define the task options.</li>
<li>Select a token.</li>
<li>Enter your script</li>
<li>Click <strong>Save</strong></li>
</ol>

</div>
</div>
</div>
</div>
 

