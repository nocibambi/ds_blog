<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Setting up AWS Cloud for InfluxDB | Value this</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="Setting up AWS Cloud for InfluxDB" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="How to set up AWS Cloud for InfluxDB?" />
<meta property="og:description" content="How to set up AWS Cloud for InfluxDB?" />
<link rel="canonical" href="https://andrasnovoszath.com/aws/ec2/influxdb/2020/11/18/influxdb-aws-cloud-setup.html" />
<meta property="og:url" content="https://andrasnovoszath.com/aws/ec2/influxdb/2020/11/18/influxdb-aws-cloud-setup.html" />
<meta property="og:site_name" content="Value this" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-11-18T00:00:00-06:00" />
<script type="application/ld+json">
{"description":"How to set up AWS Cloud for InfluxDB?","headline":"Setting up AWS Cloud for InfluxDB","dateModified":"2020-11-18T00:00:00-06:00","datePublished":"2020-11-18T00:00:00-06:00","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://andrasnovoszath.com/aws/ec2/influxdb/2020/11/18/influxdb-aws-cloud-setup.html"},"url":"https://andrasnovoszath.com/aws/ec2/influxdb/2020/11/18/influxdb-aws-cloud-setup.html","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://andrasnovoszath.com/feed.xml" title="Value this" /><!-- the google_analytics_id gets auto inserted from the config file -->



<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-178880214-1','auto');ga('require','displayfeatures');ga('send','pageview');</script>

<link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Setting up AWS Cloud for InfluxDB | Value this</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="Setting up AWS Cloud for InfluxDB" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="How to set up AWS Cloud for InfluxDB?" />
<meta property="og:description" content="How to set up AWS Cloud for InfluxDB?" />
<link rel="canonical" href="https://andrasnovoszath.com/aws/ec2/influxdb/2020/11/18/influxdb-aws-cloud-setup.html" />
<meta property="og:url" content="https://andrasnovoszath.com/aws/ec2/influxdb/2020/11/18/influxdb-aws-cloud-setup.html" />
<meta property="og:site_name" content="Value this" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-11-18T00:00:00-06:00" />
<script type="application/ld+json">
{"description":"How to set up AWS Cloud for InfluxDB?","headline":"Setting up AWS Cloud for InfluxDB","dateModified":"2020-11-18T00:00:00-06:00","datePublished":"2020-11-18T00:00:00-06:00","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://andrasnovoszath.com/aws/ec2/influxdb/2020/11/18/influxdb-aws-cloud-setup.html"},"url":"https://andrasnovoszath.com/aws/ec2/influxdb/2020/11/18/influxdb-aws-cloud-setup.html","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

<link href="https://unpkg.com/@primer/css/dist/primer.css" rel="stylesheet" />
<link rel="stylesheet" href="//use.fontawesome.com/releases/v5.0.7/css/all.css"><link type="application/atom+xml" rel="alternate" href="https://andrasnovoszath.com/feed.xml" title="Value this" /><!-- the google_analytics_id gets auto inserted from the config file -->



<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-178880214-1','auto');ga('require','displayfeatures');ga('send','pageview');</script>


    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">
    <script type="text/javascript" async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"> </script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js" integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous"></script>
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement( document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "[%", right: "%]", display: true},
            {left: "$", right: "$", display: false}
        ]}
        );
    });
    </script>


<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head><body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Value this</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a><a class="page-link" href="/search/">Search</a><a class="page-link" href="/categories/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Setting up AWS Cloud for InfluxDB</h1><p class="page-description">How to set up AWS Cloud for InfluxDB?</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2020-11-18T00:00:00-06:00" itemprop="datePublished">
        Nov 18, 2020
      </time>
       • <span class="read-time" title="Estimated read time">
    
    
      5 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/categories/#AWS">AWS</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#EC2">EC2</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#InfluxDB">InfluxDB</a>
        
      
      </p>
    

    </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>In this post you can learn the steps you need to set up InfluxDB on an AWS EC2 instance.</p>

<p>For better comprehension, this posts is structured into the following sections:</p>

<ol>
  <li>Set up an AWS account and an EC2 Virtual Server</li>
  <li>Set up an AWS EC2 instance</li>
  <li>Set up InfluxDB on you EC2 instance</li>
  <li>Try out InfluxDB on your EC2 instance</li>
</ol>

<h2 id="set-up-an-ec2-virtual-server">Set up an EC2 Virtual Server</h2>

<p>In this section we will set up an EC2 Virtual Server. After this step we can create our EC2 instance. This phase consists of the following steps:</p>

<ol>
  <li>Set up an AWS account</li>
  <li>Set up an EC2 key pair</li>
  <li>Set up an AWS user</li>
  <li>Install and set up the AWS command line client (AWS CLI) on your system</li>
</ol>

<h3 id="set-up-an-aws-account">Set up an AWS account</h3>

<p>In case you do not have an AWS account, you can create one for free.</p>

<ol>
  <li><a href="https://aws.amazon.com/free/">Create an AWS account</a></li>
  <li>
    <p>Select the appropriate region:</p>

    <p><img src="/images/influxdb/aws_cloudformation/influxdb-aws-region.png" alt="aws region select" /></p>
  </li>
</ol>

<h3 id="set-up-an-ec2-key-pair">Set up an EC2 Key pair</h3>

<p>In order to access your cloud server you need to set up a proper authentication by generating a key pair.</p>

<ol>
  <li>
    <p>Search for “EC2” in the <strong>Find Services</strong> search box and select <strong>EC2 (Virtual Servers in the Cloud)</strong>. (Note that you have to provide credit card information and that it may take up to 24 hours for amazon to activate):</p>

    <p><img src="/images/influxdb/aws_cloudformation/influxdb-aws-ec2-select.png" alt="aws ec2 select" /></p>

    <p>This menu contains most of the EC2-related services so we will work here for a big part of this tutorial.</p>
  </li>
  <li>
    <p>Select <strong>Key Pairs</strong> and create a key pair:</p>

    <p><img src="/images/influxdb/2020-12-02-influxdb-aws-create-key-pair.png" alt="Create key pair" /></p>
  </li>
  <li>Download the keys.</li>
  <li>
    <p>Make the key readable only by the owner. Navigate to the folder to where you downloaded your key and change the key’s permissions:</p>

    <p><code class="highlighter-rouge">chmod 400 name-of-the-key.pem</code></p>
  </li>
</ol>

<h3 id="set-up-an-aws-user">Set up an AWS user</h3>

<p>After creating a key pair, you also need to create a user and assign it to a user group with the necessary permissions.</p>

<ol>
  <li>
    <p>Open <strong>IAM</strong> (Identity and Access Management) from <strong>Services</strong>:</p>

    <p><img src="/images/influxdb/aws_cloudformation/infludb-aws-select-iam.png" alt="open-aim" /></p>
  </li>
  <li>
    <p>Select <strong>Add user</strong>:</p>

    <p><img src="/images/influxdb/aws_cloudformation/infludb-aws-iam-create-user.png" alt="iam-new-user" /></p>
  </li>
  <li>
    <p>Name the user and add access rights to it:</p>

    <p><img src="/images/influxdb/aws_cloudformation/influxdb-aws-iam-new-user-access.png" alt="iam-new-user-access" /></p>
  </li>
  <li>
    <p>On the <strong>Set Permissions</strong> screen, click on <strong>Add user to group</strong> and <strong>Create a group</strong>:</p>

    <p><img src="/images/influxdb/aws_cloudformation/influxdb-aws-iam-new-user-create-group.png" alt="iam-new-user-new-group" /></p>
  </li>
  <li>
    <p>Define a name and add a policy for the new group:</p>

    <p><img src="/images/influxdb/aws_cloudformation/influxdb-aws-iam-group-permissions.png" alt="iam-new-group" /></p>
  </li>
  <li>
    <p>At the end of the process, you will see your access details:</p>

    <p><img src="/images/influxdb/aws_cloudformation/influxdb-aws-iam-new-user-success.png" alt="iam-new-user-success" /></p>

    <p>Here, write down somewhere your <strong>Access Key ID</strong> and your <strong>Secret Access Key</strong> as you will need them in a later step and <a href="https://aws.amazon.com/blogs/security/wheres-my-secret-access-key/">you will not be able to regenerate it</a>.</p>
  </li>
</ol>

<p>Now, you have set up a user and credentials. In the next step, you will install the AWS Command Line Interface on your system.</p>

<h3 id="set-up-aws-cli-on-your-system">Set up AWS CLI on your system</h3>

<p>The AWS CLI will allow you to configure and access your AWS EC2 instance from the terminal.</p>

<ol>
  <li>
    <p>Install the AWS CLI on your system.</p>

    <p>On a linux machine, you can do this as here:</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> curl <span class="s2">"https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip"</span> <span class="nt">-o</span> <span class="s2">"awscliv2.zip"</span>
 unzip awscliv2.zip
 <span class="nb">sudo</span> ./aws/install
</code></pre></div>    </div>

    <p>For other systems and for further instructions <a href="https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2.html">see this guide</a>.</p>

    <p>Verfify the version you installed:</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>aws <span class="nt">--version</span>
 aws-cli/2.1.2 Python/3.7.3 Linux/5.4.0-54-generic exe/x86_64.ubuntu.20
</code></pre></div>    </div>
  </li>
  <li>
    <p>Create a folder where you will store your keys and your yaml configuration.</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nb">mkdir</span> ~/Projects/influxdb_aws_cloudformation
 <span class="nb">cd</span> ~/Projects/influxdb_aws_cloudformation
 <span class="nb">mv</span> ~/Downloads/name-of-the-key.pem <span class="nb">.</span>
 <span class="nb">touch </span>config.yml
</code></pre></div>    </div>
  </li>
  <li>
    <p>Configure AWS with <code class="highlighter-rouge">aws configure</code>. Here you need to add your <strong>Access Key ID</strong>, your <strong>Secret Access Key</strong> (that you generated for your user at the IAM), and the <strong>region name</strong> (e.g. <code class="highlighter-rouge">eu-central-1</code>). You can skip the output format.</p>
  </li>
</ol>

<p>Now you have everything you need to set up your EC2 instance. This is what we will do in the next step.</p>

<h2 id="set-up-an-aws-ec2-instance">Set up an AWS EC2 instance</h2>

<p>In this section we will go through the steps to create your EC2 instance. This section consists of the following steps:</p>

<ol>
  <li>Identify and EC2 image to use</li>
  <li>Define your stack’s resources</li>
  <li>Create an AWS Cloud Formation stack</li>
  <li>Connect to your instance</li>
</ol>

<h3 id="find-an-ec2-image">Find an EC2 image</h3>

<ol>
  <li>Open the <a href="https://aws.amazon.com/marketplace/">Amazon AWS Marketplace</a>.</li>
  <li>
    <p>Find a public image</p>

    <p><img src="/images/influxdb/2020-11-20-influxdb-aws-find-public-image.png" alt="Find public image" /></p>
  </li>
</ol>

<p>If you are not</p>

<h3 id="define-resources">Define resources</h3>

<p>Resources
Logical ID
Instance properties
AMI (Amazon Machine Image) ID</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">Resources</span><span class="pi">:</span>
  <span class="na">Appnode</span><span class="pi">:</span>
    <span class="na">Type</span><span class="pi">:</span> <span class="s">AWS::EC2::Instance</span>
    <span class="na">Properties</span><span class="pi">:</span>
      <span class="na">InstanceType</span><span class="pi">:</span> <span class="s">t2.nano</span>
      <span class="na">ImageId</span><span class="pi">:</span> <span class="s">ami-06a719e5f8e22c33b</span> <span class="c1"># The AMI instance ID</span>
      <span class="na">Keyname</span><span class="pi">:</span> <span class="s">InfluxDB_AWS_example</span> <span class="c1"># The name of your key pair</span>
      <span class="na">SecurityGroups</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="kt">!Ref</span> <span class="s">AppnodeSecurityGroup</span> <span class="c1"># Reference the security group defined below</span>
</code></pre></div></div>

<p>You need to define a security group. Security groups act as virtual firewalls for your incoming/outgoing traffic with the help of rules. You can read more about them <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-security-groups.html">here</a>. Here, we define an <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-security-group-ingress.html">inbound security group</a>. For particular rules, <a href="https://docs.aws.amazon.com/vpc/latest/userguide/VPC_SecurityGroups.html#SecurityGroupRules">see here</a>.</p>

<p>We define the security group and link it to our app node definition with the <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-ref.html"><code class="highlighter-rouge">Ref</code> function</a>.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Define the security group</span>
<span class="na">AppnodeSecurityGroup</span><span class="pi">:</span>
  <span class="na">Type</span><span class="pi">:</span> <span class="s">AWS::EC2::SecurityGroup</span>
  <span class="na">Properties</span><span class="pi">:</span>
    <span class="na">GroupDescription</span><span class="pi">:</span> <span class="s">SSH enabled app nodes</span>
    <span class="c1"># Inbound security rule</span>
    <span class="c1"># Expose the HTTP port 80 with tcp to inbound traffic from andy Ipv4 addresses</span>
    <span class="na">SecurityGroupIngress</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">IpProtocol</span><span class="pi">:</span> <span class="s">tcp</span>
        <span class="na">FromPort</span><span class="pi">:</span> <span class="s1">'</span><span class="s">80'</span>
        <span class="na">ToPort</span><span class="pi">:</span> <span class="s1">'</span><span class="s">80'</span>
        <span class="na">CidrIp</span><span class="pi">:</span> <span class="s">0.0.0.0/0</span>
</code></pre></div></div>

<p>Define Bash script to install docker and influxdb on the image.</p>

<p>The full yaml:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">Resources</span><span class="pi">:</span>
  <span class="na">AppNode</span><span class="pi">:</span>
    <span class="na">Type</span><span class="pi">:</span> <span class="s">AWS::EC2::Instance</span>
    <span class="na">Properties</span><span class="pi">:</span>
      <span class="na">InstanceType</span><span class="pi">:</span> <span class="s">t2.micro</span>
      <span class="na">ImageId</span><span class="pi">:</span> <span class="s">ami-03d85bfa79ad10274</span>
      <span class="na">KeyName</span><span class="pi">:</span> <span class="s">InfluxDB_AWS_example</span>
      <span class="na">SecurityGroups</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="kt">!Ref</span> <span class="s">AppNodeSG</span>
  <span class="na">AppNodeSG</span><span class="pi">:</span>
    <span class="na">Type</span><span class="pi">:</span> <span class="s">AWS::EC2::SecurityGroup</span>
    <span class="na">Properties</span><span class="pi">:</span>
      <span class="na">GroupDescription</span><span class="pi">:</span> <span class="s">for the app nodes that allow ssh</span>
      <span class="na">SecurityGroupIngress</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">IpProtocol</span><span class="pi">:</span> <span class="s">tcp</span>
        <span class="na">FromPort</span><span class="pi">:</span> <span class="s1">'</span><span class="s">80'</span>
        <span class="na">ToPort</span><span class="pi">:</span> <span class="s1">'</span><span class="s">80'</span>
        <span class="na">CidrIp</span><span class="pi">:</span> <span class="s">0.0.0.0/0</span>
      <span class="pi">-</span> <span class="na">IpProtocol</span><span class="pi">:</span> <span class="s">tcp</span>
        <span class="na">FromPort</span><span class="pi">:</span> <span class="s1">'</span><span class="s">22'</span>
        <span class="na">ToPort</span><span class="pi">:</span> <span class="s1">'</span><span class="s">22'</span>
        <span class="na">CidrIp</span><span class="pi">:</span> <span class="s">0.0.0.0/0</span>
</code></pre></div></div>

<h3 id="create-a-cloud-formation-stack">Create a Cloud Formation stack</h3>

<ul>
  <li><img src="../images/influxdb/2020-12-01-influxdb-aws-select-cloudformation.png" alt="Select Cloudformation" /></li>
  <li><img src="/images/influxdb/2020-12-01-influxdb-aws-select-create-stack.png" alt="Select Create Stack" /></li>
  <li><img src="/images/influxdb/2020-12-01-influxdb-aws-upload-template.png" alt="Upload Template" /></li>
  <li>On the rest of the screens the only thing you have to do is to name the stack, you can skip the rest of the options.</li>
</ul>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws cloudformation create-stack <span class="se">\</span>
  <span class="nt">--stack-name</span> influxdb-trial-stack <span class="se">\</span>
  <span class="nt">--region</span> eu-central-1 <span class="se">\</span>
  <span class="nt">--template-body</span> file://<span class="nv">$PWD</span>/stack.yaml
</code></pre></div></div>

<p>Go back to the EC2 services page and find the instances menu. There you will be able to see your newly created instance. Wait until it finishies initialization and has all of its checkes passed.</p>

<p><img src="/images/influxdb/2020-12-01-influxdb-aws-instance-initialization.png" alt="EC2 instance initialization" /></p>

<h3 id="connect-to-your-instance">Connect to your instance</h3>

<p><img src="/images/influxdb/2020-11-23-influxdb-aws-get-instance-dns.png" alt="Get AMI instance DNS" /></p>

<p>Create a connection to our instance:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh <span class="nt">-v</span> <span class="nt">-i</span> InfluxDB_AWS_example.pem <span class="se">\</span>
  ubuntu@ec2-3-122-XXX-XX.eu-central-1.compute.amazonaws.com
</code></pre></div></div>

<h2 id="install-and-set-up-influxdb-on-the-ec2-instance">Install and set up InfluxDB on the EC2 instance</h2>

<h3 id="install-influxdb">Install InfluxDB</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget https://dl.influxdata.com/influxdb/releases/influxdb_2.0.2_amd64.deb
<span class="nb">sudo </span>dpkg <span class="nt">-i</span> influxdb_2.0.2_amd64.deb
</code></pre></div></div>

<p>Start the influxdb service.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl start influxdb
</code></pre></div></div>

<p>Setup InfluxDB configuration settings</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>influx setup
</code></pre></div></div>

<p>Here you need to add a username, a password, and name your organization and your primary bucket. You can skip on the retention period question.</p>

<h2 id="try-out-influxdb">Try out InfluxDB</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>influx bucket list
ID   Name  Retention Organization ID
61003b98acb988da _monitoring 168h0m0s aca7861debe89fb5
62a458b6d3091276 _tasks  72h0m0s  aca7861debe89fb5
d4e2f2ae14c34289 test_bucket 1h0m0s  aca7861debe89fb5
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">date</span> +%s
1606723341
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>influx write <span class="nt">-b</span> test_bucket <span class="nt">-o</span> nocibambi@gmail.com <span class="nt">-p</span> s <span class="s1">'test_measurement,host=testHost testField="testFieldValue" 1606723341'</span>
</code></pre></div></div>

<p>Use Ctrl-D to execute the query.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>influx query
from<span class="o">(</span>bucket: <span class="s2">"test_bucket"</span><span class="o">)</span> |&gt; range<span class="o">(</span>start:-1h<span class="o">)</span>
Result: _result
Table: keys: <span class="o">[</span>_start, _stop, _field, _measurement, host]
                   _start:time                      _stop:time           _field:string     _measurement:string             host:string                      _time:time           _value:string  
<span class="nt">------------------------------</span>  <span class="nt">------------------------------</span>  <span class="nt">----------------------</span>  <span class="nt">----------------------</span>  <span class="nt">----------------------</span>  <span class="nt">------------------------------</span>  <span class="nt">----------------------</span>  
2020-11-30T07:03:07.010273692Z  2020-11-30T08:03:07.010273692Z               testField        test_measurement                testHost  2020-11-30T08:02:21.000000000Z          testFieldValue  
</code></pre></div></div>

  </div><a class="u-url" href="/aws/ec2/influxdb/2020/11/18/influxdb-aws-cloud-setup.html" hidden></a>
</article>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>This is not another blog about bitcoin.</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li><a rel="me" href="https://github.com/nocibambi" title="nocibambi"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg></a></li><li><a rel="me" href="https://twitter.com/nocibambi" title="nocibambi"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg></a></li></ul>
</div>

  </div>

</footer>
</body>

</html>
